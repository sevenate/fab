<UserControl x:Class="Fab.Client.Authentication.LoginView"
			 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
			 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
			 xmlns:Interactivity="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
			 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
			 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
			 xmlns:Behaviors="clr-namespace:Fab.Client.Framework.Behaviors"
			 xmlns:Authentication="clr-namespace:Fab.Client.Authentication"
             xmlns:sdk="http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk"
             IsEnabled="{Binding IsBusy, Converter={StaticResource boolToNotBool}}"
			 mc:Ignorable="d"
			 d:DataContext="{d:DesignData Source=./SampleData/LoginData.xaml}" MinWidth="280">
	<StackPanel MinWidth="260">
		<TextBlock TextWrapping="Wrap"
				   Text="{Binding Path=LocalizedStrings.LoginView_Title, FallbackValue='Login'}"
		           FontSize="21.333"
		           Margin="2,0,2,2" />
		<sdk:Label Content="{Binding Path=LocalizedStrings.LoginView_Language, FallbackValue=Language}"
				   Target="{Binding ElementName=Cultures}"
				   Margin="5,10,5,2" />
		<ComboBox x:Name="Cultures"
				  SelectedValue="{Binding CurrentCulture, Mode=TwoWay}"
				  ItemTemplate="{StaticResource LanguageItem}" />
		<sdk:Label Content="{Binding Path=LocalizedStrings.LoginView_Username, FallbackValue=Username}"
				   Target="{Binding ElementName=Username}"
		           Margin="5,10,5,2" />
		<TextBox x:Name="Username"
		         TabIndex="0"
		         MaxLength="50">
			<Interactivity:Interaction.Behaviors>
				<Behaviors:DefaultButtonBehavior DefaultButton="{Binding ElementName=Login}" />
				<Behaviors:FocusBehavior HasInitialFocus="True" />
				<Behaviors:SelectTextOnFocusBehavior />
			</Interactivity:Interaction.Behaviors>
		</TextBox>
		<sdk:Label Content="{Binding Path=LocalizedStrings.LoginView_Password, FallbackValue=Password}"
				   Target="{Binding ElementName=PasswordHiden}"
		           Margin="5,10,5,2" />
		<TextBox x:Name="Password"
		         TabIndex="1"
		         MaxLength="256"
		         Visibility="{Binding IsChecked, Converter={StaticResource boolToVisibility}, ElementName=ShowCharacters}">
			<Interactivity:Interaction.Behaviors>
				<Behaviors:DefaultButtonBehavior DefaultButton="{Binding ElementName=Login}" />
				<Behaviors:FocusBehavior IsFocused="{Binding UsernameIsFocused, Mode=TwoWay}" />
				<Behaviors:SelectTextOnFocusBehavior />
			</Interactivity:Interaction.Behaviors>
		</TextBox>
		<PasswordBox x:Name="PasswordHiden"
		             TabIndex="1"
		             Visibility="{Binding IsChecked, Converter={StaticResource boolToVisibilityInvert}, ElementName=ShowCharacters}"
		             MaxLength="256">
			<Interactivity:Interaction.Behaviors>
				<Behaviors:DefaultButtonBehavior DefaultButton="{Binding ElementName=Login}" />
				<Authentication:PasswordBindBehavior BoundPassword="{Binding Password, Mode=TwoWay}" />
				<Behaviors:SelectPasswordOnFocusBehavior />
			</Interactivity:Interaction.Behaviors>
		</PasswordBox>
		<Grid Margin="5,10,5,2">
			<Grid.ColumnDefinitions>
				<ColumnDefinition />
				<ColumnDefinition />
			</Grid.ColumnDefinitions>
			<CheckBox x:Name="ShowCharacters"
			          IsChecked="{Binding ShowCharacters, Mode=TwoWay}"
					  Content="{Binding Path=LocalizedStrings.LoginView_Show_characters, FallbackValue='Show characters'}"
			          HorizontalAlignment="Left"
			          TabIndex="2" VerticalContentAlignment="Stretch">
				<Interactivity:Interaction.Behaviors>
					<Behaviors:DefaultButtonBehavior DefaultButton="{Binding ElementName=Login}" />
				</Interactivity:Interaction.Behaviors>
			</CheckBox>
			<CheckBox IsChecked="{Binding RememberMe, Mode=TwoWay}"
			          Grid.Column="1"
					  Content="{Binding Path=LocalizedStrings.LoginView_Remember_me, FallbackValue='Remember me'}"
			          HorizontalAlignment="Right"
			          TabIndex="3"
			          VerticalContentAlignment="Stretch">
				<Interactivity:Interaction.Behaviors>
					<Behaviors:DefaultButtonBehavior DefaultButton="{Binding ElementName=Login}" />
				</Interactivity:Interaction.Behaviors>
			</CheckBox>
		</Grid>
		<TextBlock Text="{Binding Status}"
		           Opacity="{Binding ShowStatus, Converter={StaticResource boolToOpacity}}"
				   Margin="5,10,5,0"
				   MinHeight="24"
				   MaxWidth="350"
				   TextWrapping="Wrap"
				   TextTrimming="WordEllipsis"
				   HorizontalAlignment="Center" />
		<Button x:Name="Login"
				Content="{Binding Path=LocalizedStrings.LoginView_Login, FallbackValue='Login'}"
		        HorizontalAlignment="Center"
		        TabIndex="4" />
	</StackPanel>
</UserControl>
