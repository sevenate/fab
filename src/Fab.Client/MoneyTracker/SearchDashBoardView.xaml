<UserControl x:Class="Fab.Client.MoneyTracker.SearchDashBoardView"
						 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
						 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
						 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
						 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
						 xmlns:cal="http://www.caliburnproject.org"
						 xmlns:sdk="http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk"
						 xmlns:Resources="clr-namespace:Fab.Client.Resources.Actions"
						 xmlns:Controls="clr-namespace:SilverlightContrib.Controls;assembly=SilverlightContrib.Controls"
						 xmlns:toolkit="http://schemas.microsoft.com/winfx/2006/xaml/presentation/toolkit"
						 mc:Ignorable="d"
						 d:DesignHeight="187"
						 d:DesignWidth="980">
	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto" />
			<RowDefinition Height="Auto" />
			<RowDefinition />
			<RowDefinition Height="Auto" />
		</Grid.RowDefinitions>
		<toolkit:DockPanel>
			<Button x:Name="Search"
							toolkit:DockPanel.Dock="Right"
							Content="{Binding SearchStatus, FallbackValue=Search}"
							MinWidth="75" />
			<TextBox x:Name="ContainsText"
							 toolkit:DockPanel.Dock="Right"
							 MinWidth="100" />
			<ComboBox x:Name="Accounts"
								MinWidth="100"
								toolkit:DockPanel.Dock="Right"
								ScrollViewer.HorizontalScrollBarVisibility="Disabled"
								HorizontalContentAlignment="Stretch" />
			<sdk:DatePicker x:Name="UpTo"
											toolkit:DockPanel.Dock="Right"
											IsEnabled="{Binding IsChecked, ElementName=IsUpto}"
											SelectedDateFormat="Long" />
			<CheckBox x:Name="IsUpto"
								toolkit:DockPanel.Dock="Right"
								Content="End"
								HorizontalAlignment="Left"
								IsChecked="{Binding Path=UseEndDate}" />
			<sdk:DatePicker x:Name="NotOlderThen"
											toolkit:DockPanel.Dock="Right"
											IsEnabled="{Binding IsChecked, ElementName=IsNotOlderThen}"
											SelectedDateFormat="Long" />
			<CheckBox x:Name="IsNotOlderThen"
								toolkit:DockPanel.Dock="Right"
								Content="Start"
								IsChecked="{Binding Path=UseStartDate}" />
			<StackPanel Orientation="Horizontal" Margin="5">
				<TextBlock Text="Sum Income:"
									 Grid.Column="1"
									 Grid.Row="0"
									 Foreground="White" />
				<TextBlock Foreground="{Binding Path=TotalIncome, Converter={StaticResource balanceToColor}}"
									 Grid.Column="2"
									 Grid.Row="0"
									 Text="{Binding Path=TotalIncome, StringFormat=n}"
									 HorizontalAlignment="Right" />
				<TextBlock Text="Sum Expense:"
									 Grid.Column="1"
									 Grid.Row="1"
									 Foreground="White" />
				<TextBlock Foreground="{Binding Path=TotalExpense, Converter={StaticResource balanceToColor}}"
									 Grid.Column="2"
									 Grid.Row="1"
									 Text="{Binding Path=TotalExpense, StringFormat=n}"
									 HorizontalAlignment="Right" />
				<TextBlock Text="Difference:"
									 Grid.Column="4"
									 Grid.Row="1"
									 Foreground="White" />
				<TextBlock Grid.Column="5"
									 Grid.Row="1"
									 Foreground="{Binding Path=BalanceDiff, Converter={StaticResource balanceToColor}}"
									 Text="{Binding Path=BalanceDiff, StringFormat=n}"
									 HorizontalAlignment="Right" />
				<TextBlock Text="Postings Count:"
									 Grid.Column="1"
									 Grid.Row="2"
									 Foreground="White" />
				<TextBlock Text="{Binding Path=TransactionRecords.Count}"
									 Grid.Column="2"
									 Grid.Row="2"
									 Foreground="#FFE5E500"
									 HorizontalAlignment="Right" />
			</StackPanel>
		</toolkit:DockPanel>
		<sdk:DataGrid x:Name="TransactionsGrid"
									Grid.Row="2"
									AutoGenerateColumns="False"
									ItemsSource="{Binding Path=TransactionRecords}">
			<sdk:DataGrid.Columns>
				<sdk:DataGridTextColumn Header="ID"
																IsReadOnly="True"
																CanUserSort="False"
																CanUserResize="False"
																CanUserReorder="False"
																Binding="{Binding Path=TransactionId}"
																ElementStyle="{StaticResource NumbersStyle}" />
				<sdk:DataGridTemplateColumn Header="Date"
																		MinWidth="75"
																		IsReadOnly="True"
																		CanUserSort="False"
																		CanUserResize="False">
					<sdk:DataGridTemplateColumn.CellTemplate>
						<DataTemplate>
							<TextBlock VerticalAlignment="Center"
												 Text="{Binding Path=Date, Converter={StaticResource dateTimeUtcToLocal}, StringFormat=d}"
												 ToolTipService.ToolTip="{Binding Path=Date, Converter={StaticResource dateTimeUtcToLocal}, StringFormat=F}" />
						</DataTemplate>
					</sdk:DataGridTemplateColumn.CellTemplate>
					<sdk:DataGridTemplateColumn.CellEditingTemplate>
						<DataTemplate>
							<sdk:DatePicker VerticalAlignment="Center"
															IsTodayHighlighted="True"
															SelectedDateFormat="Long"
															SelectedDate="{Binding Path=Date, Mode=TwoWay, Converter={StaticResource dateTimeUtcToLocal}}" />
						</DataTemplate>
					</sdk:DataGridTemplateColumn.CellEditingTemplate>
				</sdk:DataGridTemplateColumn>
				<sdk:DataGridTemplateColumn Header="Category"
																		MinWidth="75"
																		IsReadOnly="True"
																		CanUserSort="False"
																		CanUserResize="False">
					<sdk:DataGridTemplateColumn.CellTemplate>
						<DataTemplate>
							<Border CornerRadius="3"
											Background="White"
											HorizontalAlignment="Left"
											VerticalAlignment="Center"
											Padding="4,3"
											Visibility="{Binding Path=Category, Converter={StaticResource nullToCollapsed}}">
								<TextBlock VerticalAlignment="Center"
													 Foreground="Black"
													 Text="{Binding Path=Category.Name}"
													 TextTrimming="WordEllipsis" />
							</Border>
						</DataTemplate>
					</sdk:DataGridTemplateColumn.CellTemplate>
				</sdk:DataGridTemplateColumn>
				<sdk:DataGridTemplateColumn Header="Comment"
																		Width="*"
																		IsReadOnly="True"
																		CanUserSort="False">
					<sdk:DataGridTemplateColumn.CellTemplate>
						<DataTemplate>
							<TextBlock VerticalAlignment="Center"
												 Text="{Binding Path=Comment}"
												 Margin="3,0"
												 TextTrimming="WordEllipsis"
												 ToolTipService.ToolTip="{Binding Path=Comment}">
							</TextBlock>
						</DataTemplate>
					</sdk:DataGridTemplateColumn.CellTemplate>
				</sdk:DataGridTemplateColumn>
				<sdk:DataGridTextColumn Header="Expense"
																MinWidth="75"
																IsReadOnly="True"
																CanUserSort="False"
																ElementStyle="{StaticResource ExpenceStyle}"
																Binding="{Binding Path=Expense, Converter={StaticResource zeroToEmptyString}, StringFormat=n}" />
				<sdk:DataGridTextColumn Header="Income"
																MinWidth="75"
																IsReadOnly="True"
																CanUserSort="False"
																ElementStyle="{StaticResource IncomeStyle}"
																Binding="{Binding Path=Income, Converter={StaticResource zeroToEmptyString}, StringFormat=n}" />
				<sdk:DataGridTemplateColumn CanUserResize="False"
																		CanUserReorder="False"
																		CanUserSort="False"
																		IsReadOnly="True">
					<sdk:DataGridTemplateColumn.CellTemplate>
						<DataTemplate>
							<Button MaxHeight="24"
											ToolTipService.ToolTip="Edit"
											Padding="3"
											cal:Message.Attach="EditPosting($dataContext)">
								<Button.Content>
									<Resources:EditIcon />
								</Button.Content>
							</Button>
						</DataTemplate>
					</sdk:DataGridTemplateColumn.CellTemplate>
				</sdk:DataGridTemplateColumn>
				<sdk:DataGridTemplateColumn CanUserResize="False"
																		CanUserReorder="False"
																		CanUserSort="False"
																		IsReadOnly="True">
					<sdk:DataGridTemplateColumn.CellTemplate>
						<DataTemplate>
							<Button MaxHeight="24"
											Padding="3"
											ToolTipService.ToolTip="Delete"
											cal:Message.Attach="DeleteTransaction($dataContext)">
								<Button.Content>
									<Resources:DeleteIcon />
								</Button.Content>
							</Button>
						</DataTemplate>
					</sdk:DataGridTemplateColumn.CellTemplate>
				</sdk:DataGridTemplateColumn>
			</sdk:DataGrid.Columns>
		</sdk:DataGrid>
		<ContentControl x:Name="ActiveItem"
										Grid.Row="2"
										VerticalContentAlignment="Stretch"
										HorizontalContentAlignment="Stretch" />
		<ContentControl x:Name="Dialogs"
										Grid.RowSpan="3"
										VerticalContentAlignment="Stretch"
										HorizontalContentAlignment="Stretch" />
	</Grid>
</UserControl>
